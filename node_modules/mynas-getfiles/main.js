var _ = require("lodash");
var oReaddirp = require('readdirp');
var oThrough = require("through2");

function getFIles(oInput) {

    var oStream = oReaddirp({
        root: oInput.path,
        fileFilter: oInput.moviesExtensions
    });


    return oStream.pipe(
        oThrough.obj(function(oFile, oEnc, fCallback) {

            var oEntry = {
                path: oFile.fullPath,
                name: oFile.name,
                creationTime: oFile.stat.ctime,
                modificationTime: oFile.stat.mtime
            };

            this.push(oEntry);

            fCallback();
        })
    );


}


module.exports = getFIles;
